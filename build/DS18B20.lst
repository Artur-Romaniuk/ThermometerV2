ARM GAS  /tmp/ccTqHLFx.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"DS18B20.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.micro_delay,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	micro_delay:
  26              	.LVL0:
  27              	.LFB135:
  28              		.file 1 "Core/Src/DS18B20.c"
   1:Core/Src/DS18B20.c **** /*
   2:Core/Src/DS18B20.c ****  * DS18B20.c
   3:Core/Src/DS18B20.c ****  *
   4:Core/Src/DS18B20.c ****  *  Created on: Jun 22, 2021
   5:Core/Src/DS18B20.c ****  *      Author: artur
   6:Core/Src/DS18B20.c ****  */
   7:Core/Src/DS18B20.c **** 
   8:Core/Src/DS18B20.c **** #include "DS18B20.h"
   9:Core/Src/DS18B20.c **** 
  10:Core/Src/DS18B20.c **** volatile int DS18B20_state = 0;
  11:Core/Src/DS18B20.c **** 
  12:Core/Src/DS18B20.c **** //static functions declarations//////////////
  13:Core/Src/DS18B20.c **** static void micro_delay(uint16_t delay);
  14:Core/Src/DS18B20.c **** static void Set_Pin_Output(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);
  15:Core/Src/DS18B20.c **** static void Set_Pin_Input(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);
  16:Core/Src/DS18B20.c **** static void Set_Pin_Output_Defualt();
  17:Core/Src/DS18B20.c **** static void Set_Pin_Input_Defualt();
  18:Core/Src/DS18B20.c **** 
  19:Core/Src/DS18B20.c **** //functions/////////////////////////////
  20:Core/Src/DS18B20.c **** 
  21:Core/Src/DS18B20.c **** int DS18B20_Initialize() {
  22:Core/Src/DS18B20.c **** 	uint8_t response;
  23:Core/Src/DS18B20.c **** 	Set_Pin_Output_Defualt();
  24:Core/Src/DS18B20.c **** 	HAL_GPIO_WritePin(DS18B20_Port, DS18B20_Pin, GPIO_PIN_RESET);
  25:Core/Src/DS18B20.c **** 	micro_delay(480); //datasheet
  26:Core/Src/DS18B20.c **** 	Set_Pin_Input_Defualt();
  27:Core/Src/DS18B20.c **** 	micro_delay(100); //datasheet
  28:Core/Src/DS18B20.c **** 	if (!HAL_GPIO_ReadPin(DS18B20_Port, DS18B20_Pin)) {
  29:Core/Src/DS18B20.c **** 		response = 0; //correct
  30:Core/Src/DS18B20.c **** 	} else {
ARM GAS  /tmp/ccTqHLFx.s 			page 2


  31:Core/Src/DS18B20.c **** 		response = 1; //empty line, error
  32:Core/Src/DS18B20.c **** 	}
  33:Core/Src/DS18B20.c **** 	micro_delay(380);
  34:Core/Src/DS18B20.c **** 	return response;
  35:Core/Src/DS18B20.c **** }
  36:Core/Src/DS18B20.c **** 
  37:Core/Src/DS18B20.c **** float DS18B20_Read_Temperature() {
  38:Core/Src/DS18B20.c **** 	if (DS18B20_Initialize()) {
  39:Core/Src/DS18B20.c **** 		return 0xffff; //error, no response from Thermometer
  40:Core/Src/DS18B20.c **** 	} else {
  41:Core/Src/DS18B20.c **** 		HAL_Delay(1);				//BLOCKING!
  42:Core/Src/DS18B20.c **** 		DS18B20_Write_Byte(SKIP_ROM);	//Single device connected
  43:Core/Src/DS18B20.c **** 		DS18B20_Write_Byte(CONVERT_T);	//Start temperature conversion
  44:Core/Src/DS18B20.c **** 
  45:Core/Src/DS18B20.c **** 		HAL_Delay(800);				//BLOCKING! Gives time for temp conversion
  46:Core/Src/DS18B20.c **** 
  47:Core/Src/DS18B20.c **** 		if (DS18B20_Initialize()) {
  48:Core/Src/DS18B20.c **** 			return 0xffff; //error, device didn't respond
  49:Core/Src/DS18B20.c **** 		} else {
  50:Core/Src/DS18B20.c **** 			HAL_Delay(1);			//BLOCKING! Waits for voltage to normalize
  51:Core/Src/DS18B20.c **** 			DS18B20_Write_Byte(SKIP_ROM); //Single device connected
  52:Core/Src/DS18B20.c **** 			DS18B20_Write_Byte(READ_SCRATCHPAD); //Get temperature from the device
  53:Core/Src/DS18B20.c **** 			uint8_t tmp1 = DS18B20_Read_Byte();
  54:Core/Src/DS18B20.c **** 			uint8_t tmp2 = DS18B20_Read_Byte();
  55:Core/Src/DS18B20.c **** 			uint16_t temperature = tmp1 | (tmp2 << 8);
  56:Core/Src/DS18B20.c **** 			return (float) temperature / 16;	//return float
  57:Core/Src/DS18B20.c **** 		}
  58:Core/Src/DS18B20.c **** 
  59:Core/Src/DS18B20.c **** 	}
  60:Core/Src/DS18B20.c **** }
  61:Core/Src/DS18B20.c **** 
  62:Core/Src/DS18B20.c **** float DS18B20_Read_Temperature_NB() {
  63:Core/Src/DS18B20.c **** 	uint8_t tmp1 ;
  64:Core/Src/DS18B20.c **** 	uint8_t tmp2 ;
  65:Core/Src/DS18B20.c **** 	uint16_t temperature;
  66:Core/Src/DS18B20.c **** 
  67:Core/Src/DS18B20.c **** 
  68:Core/Src/DS18B20.c **** 	switch (DS18B20_state) {
  69:Core/Src/DS18B20.c **** 	case 0:
  70:Core/Src/DS18B20.c **** 		if (DS18B20_Initialize()) {
  71:Core/Src/DS18B20.c **** 			return 0xffff; //error, no response from Thermometer
  72:Core/Src/DS18B20.c **** 		} else {
  73:Core/Src/DS18B20.c **** 			__HAL_TIM_SET_COUNTER(&htim7, 0xffff - 1000);
  74:Core/Src/DS18B20.c **** 		}
  75:Core/Src/DS18B20.c **** 		break;
  76:Core/Src/DS18B20.c **** 	case 1:
  77:Core/Src/DS18B20.c **** 		DS18B20_Write_Byte(SKIP_ROM);	//Single device connected
  78:Core/Src/DS18B20.c **** 		DS18B20_Write_Byte(CONVERT_T);	//Start temperature conversion
  79:Core/Src/DS18B20.c **** 		__HAL_TIM_SET_COUNTER(&htim7, 0xffff - 8000);
  80:Core/Src/DS18B20.c **** 		break;
  81:Core/Src/DS18B20.c **** 	case 2:
  82:Core/Src/DS18B20.c **** 		if (DS18B20_Initialize()) {
  83:Core/Src/DS18B20.c **** 			return 0xffff; //error, device didn't respond
  84:Core/Src/DS18B20.c **** 		} else {
  85:Core/Src/DS18B20.c **** 			__HAL_TIM_SET_COUNTER(&htim7, 0xffff - 1000);
  86:Core/Src/DS18B20.c **** 		}
  87:Core/Src/DS18B20.c **** 		break;
ARM GAS  /tmp/ccTqHLFx.s 			page 3


  88:Core/Src/DS18B20.c **** 	case 3:
  89:Core/Src/DS18B20.c **** 		DS18B20_Write_Byte(SKIP_ROM); //Single device connected
  90:Core/Src/DS18B20.c **** 		DS18B20_Write_Byte(READ_SCRATCHPAD); //Get temperature from the device
  91:Core/Src/DS18B20.c **** 		tmp1 = DS18B20_Read_Byte();
  92:Core/Src/DS18B20.c **** 		tmp2 = DS18B20_Read_Byte();
  93:Core/Src/DS18B20.c **** 		temperature = tmp1 | (tmp2 << 8);
  94:Core/Src/DS18B20.c **** 		return (float) temperature / 16;	//return float
  95:Core/Src/DS18B20.c **** 	default:
  96:Core/Src/DS18B20.c **** 		DS18B20_state=0;
  97:Core/Src/DS18B20.c **** 		break;
  98:Core/Src/DS18B20.c **** 	}
  99:Core/Src/DS18B20.c **** 
 100:Core/Src/DS18B20.c **** }
 101:Core/Src/DS18B20.c **** 
 102:Core/Src/DS18B20.c **** void DS18B20_Write_Byte(uint8_t byte) {
 103:Core/Src/DS18B20.c **** 	for (int i = 0; i < 8; i++) {
 104:Core/Src/DS18B20.c **** 		if ((byte & (1 << i)) != 0) {
 105:Core/Src/DS18B20.c **** 			Set_Pin_Output_Defualt();
 106:Core/Src/DS18B20.c **** 			HAL_GPIO_WritePin(DS18B20_Port, DS18B20_Pin, GPIO_PIN_RESET);
 107:Core/Src/DS18B20.c **** 			micro_delay(1);
 108:Core/Src/DS18B20.c **** 			Set_Pin_Input_Defualt();
 109:Core/Src/DS18B20.c **** 			micro_delay(60);
 110:Core/Src/DS18B20.c **** 		} else {
 111:Core/Src/DS18B20.c **** 			Set_Pin_Output_Defualt();
 112:Core/Src/DS18B20.c **** 			HAL_GPIO_WritePin(DS18B20_Port, DS18B20_Pin, GPIO_PIN_RESET);
 113:Core/Src/DS18B20.c **** 			micro_delay(60);
 114:Core/Src/DS18B20.c **** 			Set_Pin_Input_Defualt();
 115:Core/Src/DS18B20.c **** 		}
 116:Core/Src/DS18B20.c **** 	}
 117:Core/Src/DS18B20.c **** }
 118:Core/Src/DS18B20.c **** 
 119:Core/Src/DS18B20.c **** uint8_t DS18B20_Read_Byte() {
 120:Core/Src/DS18B20.c **** 	uint8_t byte = 0;
 121:Core/Src/DS18B20.c **** 	Set_Pin_Input_Defualt();
 122:Core/Src/DS18B20.c **** 	for (int i = 0; i < 8; i++) {
 123:Core/Src/DS18B20.c **** 		Set_Pin_Output_Defualt();
 124:Core/Src/DS18B20.c **** 		HAL_GPIO_WritePin(DS18B20_Port, DS18B20_Pin, GPIO_PIN_RESET);
 125:Core/Src/DS18B20.c **** 		micro_delay(2);
 126:Core/Src/DS18B20.c **** 		Set_Pin_Input_Defualt();
 127:Core/Src/DS18B20.c **** 		micro_delay(10);
 128:Core/Src/DS18B20.c **** 		if (HAL_GPIO_ReadPin(DS18B20_Port, DS18B20_Pin)) {
 129:Core/Src/DS18B20.c **** 			byte |= 1 << i;
 130:Core/Src/DS18B20.c **** 		}
 131:Core/Src/DS18B20.c **** 		micro_delay(50);
 132:Core/Src/DS18B20.c **** 	}
 133:Core/Src/DS18B20.c **** 	return byte;
 134:Core/Src/DS18B20.c **** }
 135:Core/Src/DS18B20.c **** 
 136:Core/Src/DS18B20.c **** //static functions///////////////////////////
 137:Core/Src/DS18B20.c **** 
 138:Core/Src/DS18B20.c **** static void micro_delay(uint16_t delay) {
  29              		.loc 1 138 41 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
 139:Core/Src/DS18B20.c **** 	__HAL_TIM_SET_COUNTER(&htim6, 0);
ARM GAS  /tmp/ccTqHLFx.s 			page 4


  34              		.loc 1 139 2 view .LVU1
  35 0000 034B     		ldr	r3, .L3
  36 0002 1A68     		ldr	r2, [r3]
  37 0004 0023     		movs	r3, #0
  38 0006 5362     		str	r3, [r2, #36]
 140:Core/Src/DS18B20.c **** 	while ((__HAL_TIM_GET_COUNTER(&htim6)) < delay)
  39              		.loc 1 140 2 view .LVU2
  40              	.L2:
  41              		.loc 1 140 41 discriminator 1 view .LVU3
  42              		.loc 1 140 10 is_stmt 0 discriminator 1 view .LVU4
  43 0008 536A     		ldr	r3, [r2, #36]
  44              		.loc 1 140 41 discriminator 1 view .LVU5
  45 000a 8342     		cmp	r3, r0
  46 000c FCD3     		bcc	.L2
 141:Core/Src/DS18B20.c **** 		;
 142:Core/Src/DS18B20.c **** }
  47              		.loc 1 142 1 view .LVU6
  48 000e 7047     		bx	lr
  49              	.L4:
  50              		.align	2
  51              	.L3:
  52 0010 00000000 		.word	htim6
  53              		.cfi_endproc
  54              	.LFE135:
  56              		.section	.text.Set_Pin_Output,"ax",%progbits
  57              		.align	1
  58              		.syntax unified
  59              		.thumb
  60              		.thumb_func
  61              		.fpu fpv4-sp-d16
  63              	Set_Pin_Output:
  64              	.LVL1:
  65              	.LFB136:
 143:Core/Src/DS18B20.c **** 
 144:Core/Src/DS18B20.c **** static void Set_Pin_Output(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin) {
  66              		.loc 1 144 68 is_stmt 1 view -0
  67              		.cfi_startproc
  68              		@ args = 0, pretend = 0, frame = 24
  69              		@ frame_needed = 0, uses_anonymous_args = 0
  70              		.loc 1 144 68 is_stmt 0 view .LVU8
  71 0000 00B5     		push	{lr}
  72              	.LCFI0:
  73              		.cfi_def_cfa_offset 4
  74              		.cfi_offset 14, -4
  75 0002 87B0     		sub	sp, sp, #28
  76              	.LCFI1:
  77              		.cfi_def_cfa_offset 32
 145:Core/Src/DS18B20.c **** 	GPIO_InitTypeDef GPIO_InitStruct = { 0 };
  78              		.loc 1 145 2 is_stmt 1 view .LVU9
  79              		.loc 1 145 19 is_stmt 0 view .LVU10
  80 0004 0023     		movs	r3, #0
  81 0006 0193     		str	r3, [sp, #4]
  82 0008 0293     		str	r3, [sp, #8]
  83 000a 0393     		str	r3, [sp, #12]
  84 000c 0493     		str	r3, [sp, #16]
  85 000e 0593     		str	r3, [sp, #20]
 146:Core/Src/DS18B20.c **** 	GPIO_InitStruct.Pin = GPIO_Pin;
ARM GAS  /tmp/ccTqHLFx.s 			page 5


  86              		.loc 1 146 2 is_stmt 1 view .LVU11
  87              		.loc 1 146 22 is_stmt 0 view .LVU12
  88 0010 0191     		str	r1, [sp, #4]
 147:Core/Src/DS18B20.c **** 	GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  89              		.loc 1 147 2 is_stmt 1 view .LVU13
  90              		.loc 1 147 23 is_stmt 0 view .LVU14
  91 0012 0123     		movs	r3, #1
  92 0014 0293     		str	r3, [sp, #8]
 148:Core/Src/DS18B20.c **** 	GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  93              		.loc 1 148 2 is_stmt 1 view .LVU15
 149:Core/Src/DS18B20.c **** 	HAL_GPIO_Init(GPIOx, &GPIO_InitStruct);
  94              		.loc 1 149 2 view .LVU16
  95 0016 01A9     		add	r1, sp, #4
  96              	.LVL2:
  97              		.loc 1 149 2 is_stmt 0 view .LVU17
  98 0018 FFF7FEFF 		bl	HAL_GPIO_Init
  99              	.LVL3:
 150:Core/Src/DS18B20.c **** }
 100              		.loc 1 150 1 view .LVU18
 101 001c 07B0     		add	sp, sp, #28
 102              	.LCFI2:
 103              		.cfi_def_cfa_offset 4
 104              		@ sp needed
 105 001e 5DF804FB 		ldr	pc, [sp], #4
 106              		.cfi_endproc
 107              	.LFE136:
 109              		.section	.text.Set_Pin_Output_Defualt,"ax",%progbits
 110              		.align	1
 111              		.syntax unified
 112              		.thumb
 113              		.thumb_func
 114              		.fpu fpv4-sp-d16
 116              	Set_Pin_Output_Defualt:
 117              	.LFB138:
 151:Core/Src/DS18B20.c **** 
 152:Core/Src/DS18B20.c **** static void Set_Pin_Input(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin) {
 153:Core/Src/DS18B20.c **** 	GPIO_InitTypeDef GPIO_InitStruct = { 0 };
 154:Core/Src/DS18B20.c **** 	GPIO_InitStruct.Pin = GPIO_Pin;
 155:Core/Src/DS18B20.c **** 	GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
 156:Core/Src/DS18B20.c **** 	GPIO_InitStruct.Pull = GPIO_NOPULL;
 157:Core/Src/DS18B20.c **** 	HAL_GPIO_Init(GPIOx, &GPIO_InitStruct);
 158:Core/Src/DS18B20.c **** }
 159:Core/Src/DS18B20.c **** 
 160:Core/Src/DS18B20.c **** static void Set_Pin_Output_Defualt() {
 118              		.loc 1 160 38 is_stmt 1 view -0
 119              		.cfi_startproc
 120              		@ args = 0, pretend = 0, frame = 0
 121              		@ frame_needed = 0, uses_anonymous_args = 0
 122 0000 08B5     		push	{r3, lr}
 123              	.LCFI3:
 124              		.cfi_def_cfa_offset 8
 125              		.cfi_offset 3, -8
 126              		.cfi_offset 14, -4
 161:Core/Src/DS18B20.c **** 	Set_Pin_Output(DS18B20_Port, DS18B20_Pin);
 127              		.loc 1 161 2 view .LVU20
 128 0002 0121     		movs	r1, #1
 129 0004 0148     		ldr	r0, .L9
ARM GAS  /tmp/ccTqHLFx.s 			page 6


 130 0006 FFF7FEFF 		bl	Set_Pin_Output
 131              	.LVL4:
 162:Core/Src/DS18B20.c **** }
 132              		.loc 1 162 1 is_stmt 0 view .LVU21
 133 000a 08BD     		pop	{r3, pc}
 134              	.L10:
 135              		.align	2
 136              	.L9:
 137 000c 00080240 		.word	1073874944
 138              		.cfi_endproc
 139              	.LFE138:
 141              		.section	.text.Set_Pin_Input,"ax",%progbits
 142              		.align	1
 143              		.syntax unified
 144              		.thumb
 145              		.thumb_func
 146              		.fpu fpv4-sp-d16
 148              	Set_Pin_Input:
 149              	.LVL5:
 150              	.LFB137:
 152:Core/Src/DS18B20.c **** 	GPIO_InitTypeDef GPIO_InitStruct = { 0 };
 151              		.loc 1 152 67 is_stmt 1 view -0
 152              		.cfi_startproc
 153              		@ args = 0, pretend = 0, frame = 24
 154              		@ frame_needed = 0, uses_anonymous_args = 0
 152:Core/Src/DS18B20.c **** 	GPIO_InitTypeDef GPIO_InitStruct = { 0 };
 155              		.loc 1 152 67 is_stmt 0 view .LVU23
 156 0000 00B5     		push	{lr}
 157              	.LCFI4:
 158              		.cfi_def_cfa_offset 4
 159              		.cfi_offset 14, -4
 160 0002 87B0     		sub	sp, sp, #28
 161              	.LCFI5:
 162              		.cfi_def_cfa_offset 32
 153:Core/Src/DS18B20.c **** 	GPIO_InitStruct.Pin = GPIO_Pin;
 163              		.loc 1 153 2 is_stmt 1 view .LVU24
 153:Core/Src/DS18B20.c **** 	GPIO_InitStruct.Pin = GPIO_Pin;
 164              		.loc 1 153 19 is_stmt 0 view .LVU25
 165 0004 0023     		movs	r3, #0
 166 0006 0193     		str	r3, [sp, #4]
 167 0008 0293     		str	r3, [sp, #8]
 168 000a 0393     		str	r3, [sp, #12]
 169 000c 0493     		str	r3, [sp, #16]
 170 000e 0593     		str	r3, [sp, #20]
 154:Core/Src/DS18B20.c **** 	GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
 171              		.loc 1 154 2 is_stmt 1 view .LVU26
 154:Core/Src/DS18B20.c **** 	GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
 172              		.loc 1 154 22 is_stmt 0 view .LVU27
 173 0010 0191     		str	r1, [sp, #4]
 155:Core/Src/DS18B20.c **** 	GPIO_InitStruct.Pull = GPIO_NOPULL;
 174              		.loc 1 155 2 is_stmt 1 view .LVU28
 156:Core/Src/DS18B20.c **** 	HAL_GPIO_Init(GPIOx, &GPIO_InitStruct);
 175              		.loc 1 156 2 view .LVU29
 157:Core/Src/DS18B20.c **** }
 176              		.loc 1 157 2 view .LVU30
 177 0012 01A9     		add	r1, sp, #4
 178              	.LVL6:
ARM GAS  /tmp/ccTqHLFx.s 			page 7


 157:Core/Src/DS18B20.c **** }
 179              		.loc 1 157 2 is_stmt 0 view .LVU31
 180 0014 FFF7FEFF 		bl	HAL_GPIO_Init
 181              	.LVL7:
 158:Core/Src/DS18B20.c **** 
 182              		.loc 1 158 1 view .LVU32
 183 0018 07B0     		add	sp, sp, #28
 184              	.LCFI6:
 185              		.cfi_def_cfa_offset 4
 186              		@ sp needed
 187 001a 5DF804FB 		ldr	pc, [sp], #4
 188              		.cfi_endproc
 189              	.LFE137:
 191              		.section	.text.Set_Pin_Input_Defualt,"ax",%progbits
 192              		.align	1
 193              		.syntax unified
 194              		.thumb
 195              		.thumb_func
 196              		.fpu fpv4-sp-d16
 198              	Set_Pin_Input_Defualt:
 199              	.LFB139:
 163:Core/Src/DS18B20.c **** 
 164:Core/Src/DS18B20.c **** static void Set_Pin_Input_Defualt() {
 200              		.loc 1 164 37 is_stmt 1 view -0
 201              		.cfi_startproc
 202              		@ args = 0, pretend = 0, frame = 0
 203              		@ frame_needed = 0, uses_anonymous_args = 0
 204 0000 08B5     		push	{r3, lr}
 205              	.LCFI7:
 206              		.cfi_def_cfa_offset 8
 207              		.cfi_offset 3, -8
 208              		.cfi_offset 14, -4
 165:Core/Src/DS18B20.c **** 	Set_Pin_Input(DS18B20_Port, DS18B20_Pin);
 209              		.loc 1 165 2 view .LVU34
 210 0002 0121     		movs	r1, #1
 211 0004 0148     		ldr	r0, .L15
 212 0006 FFF7FEFF 		bl	Set_Pin_Input
 213              	.LVL8:
 166:Core/Src/DS18B20.c **** }
 214              		.loc 1 166 1 is_stmt 0 view .LVU35
 215 000a 08BD     		pop	{r3, pc}
 216              	.L16:
 217              		.align	2
 218              	.L15:
 219 000c 00080240 		.word	1073874944
 220              		.cfi_endproc
 221              	.LFE139:
 223              		.section	.text.DS18B20_Initialize,"ax",%progbits
 224              		.align	1
 225              		.global	DS18B20_Initialize
 226              		.syntax unified
 227              		.thumb
 228              		.thumb_func
 229              		.fpu fpv4-sp-d16
 231              	DS18B20_Initialize:
 232              	.LFB130:
  21:Core/Src/DS18B20.c **** 	uint8_t response;
ARM GAS  /tmp/ccTqHLFx.s 			page 8


 233              		.loc 1 21 26 is_stmt 1 view -0
 234              		.cfi_startproc
 235              		@ args = 0, pretend = 0, frame = 0
 236              		@ frame_needed = 0, uses_anonymous_args = 0
 237 0000 10B5     		push	{r4, lr}
 238              	.LCFI8:
 239              		.cfi_def_cfa_offset 8
 240              		.cfi_offset 4, -8
 241              		.cfi_offset 14, -4
  22:Core/Src/DS18B20.c **** 	Set_Pin_Output_Defualt();
 242              		.loc 1 22 2 view .LVU37
  23:Core/Src/DS18B20.c **** 	HAL_GPIO_WritePin(DS18B20_Port, DS18B20_Pin, GPIO_PIN_RESET);
 243              		.loc 1 23 2 view .LVU38
 244 0002 FFF7FEFF 		bl	Set_Pin_Output_Defualt
 245              	.LVL9:
  24:Core/Src/DS18B20.c **** 	micro_delay(480); //datasheet
 246              		.loc 1 24 2 view .LVU39
 247 0006 0E4C     		ldr	r4, .L21
 248 0008 0022     		movs	r2, #0
 249 000a 0121     		movs	r1, #1
 250 000c 2046     		mov	r0, r4
 251 000e FFF7FEFF 		bl	HAL_GPIO_WritePin
 252              	.LVL10:
  25:Core/Src/DS18B20.c **** 	Set_Pin_Input_Defualt();
 253              		.loc 1 25 2 view .LVU40
 254 0012 4FF4F070 		mov	r0, #480
 255 0016 FFF7FEFF 		bl	micro_delay
 256              	.LVL11:
  26:Core/Src/DS18B20.c **** 	micro_delay(100); //datasheet
 257              		.loc 1 26 2 view .LVU41
 258 001a FFF7FEFF 		bl	Set_Pin_Input_Defualt
 259              	.LVL12:
  27:Core/Src/DS18B20.c **** 	if (!HAL_GPIO_ReadPin(DS18B20_Port, DS18B20_Pin)) {
 260              		.loc 1 27 2 view .LVU42
 261 001e 6420     		movs	r0, #100
 262 0020 FFF7FEFF 		bl	micro_delay
 263              	.LVL13:
  28:Core/Src/DS18B20.c **** 		response = 0; //correct
 264              		.loc 1 28 2 view .LVU43
  28:Core/Src/DS18B20.c **** 		response = 0; //correct
 265              		.loc 1 28 7 is_stmt 0 view .LVU44
 266 0024 0121     		movs	r1, #1
 267 0026 2046     		mov	r0, r4
 268 0028 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 269              	.LVL14:
  28:Core/Src/DS18B20.c **** 		response = 0; //correct
 270              		.loc 1 28 5 view .LVU45
 271 002c 0446     		mov	r4, r0
 272 002e 00B1     		cbz	r0, .L18
  31:Core/Src/DS18B20.c **** 	}
 273              		.loc 1 31 12 view .LVU46
 274 0030 0124     		movs	r4, #1
 275              	.L18:
 276              	.LVL15:
  33:Core/Src/DS18B20.c **** 	return response;
 277              		.loc 1 33 2 is_stmt 1 view .LVU47
 278 0032 4FF4BE70 		mov	r0, #380
ARM GAS  /tmp/ccTqHLFx.s 			page 9


 279 0036 FFF7FEFF 		bl	micro_delay
 280              	.LVL16:
  34:Core/Src/DS18B20.c **** }
 281              		.loc 1 34 2 view .LVU48
  35:Core/Src/DS18B20.c **** 
 282              		.loc 1 35 1 is_stmt 0 view .LVU49
 283 003a 2046     		mov	r0, r4
 284 003c 10BD     		pop	{r4, pc}
 285              	.LVL17:
 286              	.L22:
  35:Core/Src/DS18B20.c **** 
 287              		.loc 1 35 1 view .LVU50
 288 003e 00BF     		.align	2
 289              	.L21:
 290 0040 00080240 		.word	1073874944
 291              		.cfi_endproc
 292              	.LFE130:
 294              		.section	.text.DS18B20_Write_Byte,"ax",%progbits
 295              		.align	1
 296              		.global	DS18B20_Write_Byte
 297              		.syntax unified
 298              		.thumb
 299              		.thumb_func
 300              		.fpu fpv4-sp-d16
 302              	DS18B20_Write_Byte:
 303              	.LVL18:
 304              	.LFB133:
 102:Core/Src/DS18B20.c **** 	for (int i = 0; i < 8; i++) {
 305              		.loc 1 102 39 is_stmt 1 view -0
 306              		.cfi_startproc
 307              		@ args = 0, pretend = 0, frame = 0
 308              		@ frame_needed = 0, uses_anonymous_args = 0
 102:Core/Src/DS18B20.c **** 	for (int i = 0; i < 8; i++) {
 309              		.loc 1 102 39 is_stmt 0 view .LVU52
 310 0000 38B5     		push	{r3, r4, r5, lr}
 311              	.LCFI9:
 312              		.cfi_def_cfa_offset 16
 313              		.cfi_offset 3, -16
 314              		.cfi_offset 4, -12
 315              		.cfi_offset 5, -8
 316              		.cfi_offset 14, -4
 317 0002 0546     		mov	r5, r0
 103:Core/Src/DS18B20.c **** 		if ((byte & (1 << i)) != 0) {
 318              		.loc 1 103 2 is_stmt 1 view .LVU53
 319              	.LBB2:
 103:Core/Src/DS18B20.c **** 		if ((byte & (1 << i)) != 0) {
 320              		.loc 1 103 7 view .LVU54
 321              	.LVL19:
 103:Core/Src/DS18B20.c **** 		if ((byte & (1 << i)) != 0) {
 322              		.loc 1 103 11 is_stmt 0 view .LVU55
 323 0004 0024     		movs	r4, #0
 103:Core/Src/DS18B20.c **** 		if ((byte & (1 << i)) != 0) {
 324              		.loc 1 103 2 view .LVU56
 325 0006 0CE0     		b	.L24
 326              	.LVL20:
 327              	.L25:
 111:Core/Src/DS18B20.c **** 			HAL_GPIO_WritePin(DS18B20_Port, DS18B20_Pin, GPIO_PIN_RESET);
ARM GAS  /tmp/ccTqHLFx.s 			page 10


 328              		.loc 1 111 4 is_stmt 1 view .LVU57
 329 0008 FFF7FEFF 		bl	Set_Pin_Output_Defualt
 330              	.LVL21:
 112:Core/Src/DS18B20.c **** 			micro_delay(60);
 331              		.loc 1 112 4 view .LVU58
 332 000c 0022     		movs	r2, #0
 333 000e 0121     		movs	r1, #1
 334 0010 1048     		ldr	r0, .L30
 335 0012 FFF7FEFF 		bl	HAL_GPIO_WritePin
 336              	.LVL22:
 113:Core/Src/DS18B20.c **** 			Set_Pin_Input_Defualt();
 337              		.loc 1 113 4 view .LVU59
 338 0016 3C20     		movs	r0, #60
 339 0018 FFF7FEFF 		bl	micro_delay
 340              	.LVL23:
 114:Core/Src/DS18B20.c **** 		}
 341              		.loc 1 114 4 view .LVU60
 342 001c FFF7FEFF 		bl	Set_Pin_Input_Defualt
 343              	.LVL24:
 344              	.L26:
 103:Core/Src/DS18B20.c **** 		if ((byte & (1 << i)) != 0) {
 345              		.loc 1 103 26 discriminator 2 view .LVU61
 346 0020 0134     		adds	r4, r4, #1
 347              	.LVL25:
 348              	.L24:
 103:Core/Src/DS18B20.c **** 		if ((byte & (1 << i)) != 0) {
 349              		.loc 1 103 20 discriminator 1 view .LVU62
 350 0022 072C     		cmp	r4, #7
 351 0024 14DC     		bgt	.L29
 104:Core/Src/DS18B20.c **** 			Set_Pin_Output_Defualt();
 352              		.loc 1 104 3 view .LVU63
 104:Core/Src/DS18B20.c **** 			Set_Pin_Output_Defualt();
 353              		.loc 1 104 25 is_stmt 0 view .LVU64
 354 0026 45FA04F3 		asr	r3, r5, r4
 104:Core/Src/DS18B20.c **** 			Set_Pin_Output_Defualt();
 355              		.loc 1 104 6 view .LVU65
 356 002a 13F0010F 		tst	r3, #1
 357 002e EBD0     		beq	.L25
 105:Core/Src/DS18B20.c **** 			HAL_GPIO_WritePin(DS18B20_Port, DS18B20_Pin, GPIO_PIN_RESET);
 358              		.loc 1 105 4 is_stmt 1 view .LVU66
 359 0030 FFF7FEFF 		bl	Set_Pin_Output_Defualt
 360              	.LVL26:
 106:Core/Src/DS18B20.c **** 			micro_delay(1);
 361              		.loc 1 106 4 view .LVU67
 362 0034 0022     		movs	r2, #0
 363 0036 0121     		movs	r1, #1
 364 0038 0648     		ldr	r0, .L30
 365 003a FFF7FEFF 		bl	HAL_GPIO_WritePin
 366              	.LVL27:
 107:Core/Src/DS18B20.c **** 			Set_Pin_Input_Defualt();
 367              		.loc 1 107 4 view .LVU68
 368 003e 0120     		movs	r0, #1
 369 0040 FFF7FEFF 		bl	micro_delay
 370              	.LVL28:
 108:Core/Src/DS18B20.c **** 			micro_delay(60);
 371              		.loc 1 108 4 view .LVU69
 372 0044 FFF7FEFF 		bl	Set_Pin_Input_Defualt
ARM GAS  /tmp/ccTqHLFx.s 			page 11


 373              	.LVL29:
 109:Core/Src/DS18B20.c **** 		} else {
 374              		.loc 1 109 4 view .LVU70
 375 0048 3C20     		movs	r0, #60
 376 004a FFF7FEFF 		bl	micro_delay
 377              	.LVL30:
 378 004e E7E7     		b	.L26
 379              	.L29:
 380              	.LBE2:
 117:Core/Src/DS18B20.c **** 
 381              		.loc 1 117 1 is_stmt 0 view .LVU71
 382 0050 38BD     		pop	{r3, r4, r5, pc}
 383              	.LVL31:
 384              	.L31:
 117:Core/Src/DS18B20.c **** 
 385              		.loc 1 117 1 view .LVU72
 386 0052 00BF     		.align	2
 387              	.L30:
 388 0054 00080240 		.word	1073874944
 389              		.cfi_endproc
 390              	.LFE133:
 392              		.section	.text.DS18B20_Read_Byte,"ax",%progbits
 393              		.align	1
 394              		.global	DS18B20_Read_Byte
 395              		.syntax unified
 396              		.thumb
 397              		.thumb_func
 398              		.fpu fpv4-sp-d16
 400              	DS18B20_Read_Byte:
 401              	.LFB134:
 119:Core/Src/DS18B20.c **** 	uint8_t byte = 0;
 402              		.loc 1 119 29 is_stmt 1 view -0
 403              		.cfi_startproc
 404              		@ args = 0, pretend = 0, frame = 0
 405              		@ frame_needed = 0, uses_anonymous_args = 0
 406 0000 70B5     		push	{r4, r5, r6, lr}
 407              	.LCFI10:
 408              		.cfi_def_cfa_offset 16
 409              		.cfi_offset 4, -16
 410              		.cfi_offset 5, -12
 411              		.cfi_offset 6, -8
 412              		.cfi_offset 14, -4
 120:Core/Src/DS18B20.c **** 	Set_Pin_Input_Defualt();
 413              		.loc 1 120 2 view .LVU74
 414              	.LVL32:
 121:Core/Src/DS18B20.c **** 	for (int i = 0; i < 8; i++) {
 415              		.loc 1 121 2 view .LVU75
 416 0002 FFF7FEFF 		bl	Set_Pin_Input_Defualt
 417              	.LVL33:
 122:Core/Src/DS18B20.c **** 		Set_Pin_Output_Defualt();
 418              		.loc 1 122 2 view .LVU76
 419              	.LBB3:
 122:Core/Src/DS18B20.c **** 		Set_Pin_Output_Defualt();
 420              		.loc 1 122 7 view .LVU77
 122:Core/Src/DS18B20.c **** 		Set_Pin_Output_Defualt();
 421              		.loc 1 122 11 is_stmt 0 view .LVU78
 422 0006 0024     		movs	r4, #0
ARM GAS  /tmp/ccTqHLFx.s 			page 12


 423              	.LBE3:
 120:Core/Src/DS18B20.c **** 	Set_Pin_Input_Defualt();
 424              		.loc 1 120 10 view .LVU79
 425 0008 2646     		mov	r6, r4
 426              	.LBB4:
 122:Core/Src/DS18B20.c **** 		Set_Pin_Output_Defualt();
 427              		.loc 1 122 2 view .LVU80
 428 000a 03E0     		b	.L33
 429              	.LVL34:
 430              	.L34:
 131:Core/Src/DS18B20.c **** 	}
 431              		.loc 1 131 3 is_stmt 1 discriminator 2 view .LVU81
 432 000c 3220     		movs	r0, #50
 433 000e FFF7FEFF 		bl	micro_delay
 434              	.LVL35:
 122:Core/Src/DS18B20.c **** 		Set_Pin_Output_Defualt();
 435              		.loc 1 122 26 discriminator 2 view .LVU82
 436 0012 0134     		adds	r4, r4, #1
 437              	.LVL36:
 438              	.L33:
 122:Core/Src/DS18B20.c **** 		Set_Pin_Output_Defualt();
 439              		.loc 1 122 20 discriminator 1 view .LVU83
 440 0014 072C     		cmp	r4, #7
 441 0016 1ADC     		bgt	.L37
 123:Core/Src/DS18B20.c **** 		HAL_GPIO_WritePin(DS18B20_Port, DS18B20_Pin, GPIO_PIN_RESET);
 442              		.loc 1 123 3 view .LVU84
 443 0018 FFF7FEFF 		bl	Set_Pin_Output_Defualt
 444              	.LVL37:
 124:Core/Src/DS18B20.c **** 		micro_delay(2);
 445              		.loc 1 124 3 view .LVU85
 446 001c 0D4D     		ldr	r5, .L38
 447 001e 0022     		movs	r2, #0
 448 0020 0121     		movs	r1, #1
 449 0022 2846     		mov	r0, r5
 450 0024 FFF7FEFF 		bl	HAL_GPIO_WritePin
 451              	.LVL38:
 125:Core/Src/DS18B20.c **** 		Set_Pin_Input_Defualt();
 452              		.loc 1 125 3 view .LVU86
 453 0028 0220     		movs	r0, #2
 454 002a FFF7FEFF 		bl	micro_delay
 455              	.LVL39:
 126:Core/Src/DS18B20.c **** 		micro_delay(10);
 456              		.loc 1 126 3 view .LVU87
 457 002e FFF7FEFF 		bl	Set_Pin_Input_Defualt
 458              	.LVL40:
 127:Core/Src/DS18B20.c **** 		if (HAL_GPIO_ReadPin(DS18B20_Port, DS18B20_Pin)) {
 459              		.loc 1 127 3 view .LVU88
 460 0032 0A20     		movs	r0, #10
 461 0034 FFF7FEFF 		bl	micro_delay
 462              	.LVL41:
 128:Core/Src/DS18B20.c **** 			byte |= 1 << i;
 463              		.loc 1 128 3 view .LVU89
 128:Core/Src/DS18B20.c **** 			byte |= 1 << i;
 464              		.loc 1 128 7 is_stmt 0 view .LVU90
 465 0038 0121     		movs	r1, #1
 466 003a 2846     		mov	r0, r5
 467 003c FFF7FEFF 		bl	HAL_GPIO_ReadPin
ARM GAS  /tmp/ccTqHLFx.s 			page 13


 468              	.LVL42:
 128:Core/Src/DS18B20.c **** 			byte |= 1 << i;
 469              		.loc 1 128 6 view .LVU91
 470 0040 0028     		cmp	r0, #0
 471 0042 E3D0     		beq	.L34
 129:Core/Src/DS18B20.c **** 		}
 472              		.loc 1 129 4 is_stmt 1 view .LVU92
 129:Core/Src/DS18B20.c **** 		}
 473              		.loc 1 129 14 is_stmt 0 view .LVU93
 474 0044 0123     		movs	r3, #1
 475 0046 A340     		lsls	r3, r3, r4
 129:Core/Src/DS18B20.c **** 		}
 476              		.loc 1 129 9 view .LVU94
 477 0048 1E43     		orrs	r6, r6, r3
 478              	.LVL43:
 129:Core/Src/DS18B20.c **** 		}
 479              		.loc 1 129 9 view .LVU95
 480 004a F6B2     		uxtb	r6, r6
 481              	.LVL44:
 129:Core/Src/DS18B20.c **** 		}
 482              		.loc 1 129 9 view .LVU96
 483 004c DEE7     		b	.L34
 484              	.L37:
 129:Core/Src/DS18B20.c **** 		}
 485              		.loc 1 129 9 view .LVU97
 486              	.LBE4:
 133:Core/Src/DS18B20.c **** }
 487              		.loc 1 133 2 is_stmt 1 view .LVU98
 134:Core/Src/DS18B20.c **** 
 488              		.loc 1 134 1 is_stmt 0 view .LVU99
 489 004e 3046     		mov	r0, r6
 490 0050 70BD     		pop	{r4, r5, r6, pc}
 491              	.LVL45:
 492              	.L39:
 134:Core/Src/DS18B20.c **** 
 493              		.loc 1 134 1 view .LVU100
 494 0052 00BF     		.align	2
 495              	.L38:
 496 0054 00080240 		.word	1073874944
 497              		.cfi_endproc
 498              	.LFE134:
 500              		.section	.text.DS18B20_Read_Temperature,"ax",%progbits
 501              		.align	1
 502              		.global	DS18B20_Read_Temperature
 503              		.syntax unified
 504              		.thumb
 505              		.thumb_func
 506              		.fpu fpv4-sp-d16
 508              	DS18B20_Read_Temperature:
 509              	.LFB131:
  37:Core/Src/DS18B20.c **** 	if (DS18B20_Initialize()) {
 510              		.loc 1 37 34 is_stmt 1 view -0
 511              		.cfi_startproc
 512              		@ args = 0, pretend = 0, frame = 0
 513              		@ frame_needed = 0, uses_anonymous_args = 0
 514 0000 10B5     		push	{r4, lr}
 515              	.LCFI11:
ARM GAS  /tmp/ccTqHLFx.s 			page 14


 516              		.cfi_def_cfa_offset 8
 517              		.cfi_offset 4, -8
 518              		.cfi_offset 14, -4
  38:Core/Src/DS18B20.c **** 		return 0xffff; //error, no response from Thermometer
 519              		.loc 1 38 2 view .LVU102
  38:Core/Src/DS18B20.c **** 		return 0xffff; //error, no response from Thermometer
 520              		.loc 1 38 6 is_stmt 0 view .LVU103
 521 0002 FFF7FEFF 		bl	DS18B20_Initialize
 522              	.LVL46:
  38:Core/Src/DS18B20.c **** 		return 0xffff; //error, no response from Thermometer
 523              		.loc 1 38 5 view .LVU104
 524 0006 10B1     		cbz	r0, .L45
  39:Core/Src/DS18B20.c **** 	} else {
 525              		.loc 1 39 10 view .LVU105
 526 0008 9FED170A 		vldr.32	s0, .L47
 527              	.L40:
  60:Core/Src/DS18B20.c **** 
 528              		.loc 1 60 1 view .LVU106
 529 000c 10BD     		pop	{r4, pc}
 530              	.L45:
  41:Core/Src/DS18B20.c **** 		DS18B20_Write_Byte(SKIP_ROM);	//Single device connected
 531              		.loc 1 41 3 is_stmt 1 view .LVU107
 532 000e 0120     		movs	r0, #1
 533 0010 FFF7FEFF 		bl	HAL_Delay
 534              	.LVL47:
  42:Core/Src/DS18B20.c **** 		DS18B20_Write_Byte(CONVERT_T);	//Start temperature conversion
 535              		.loc 1 42 3 view .LVU108
 536 0014 CC20     		movs	r0, #204
 537 0016 FFF7FEFF 		bl	DS18B20_Write_Byte
 538              	.LVL48:
  43:Core/Src/DS18B20.c **** 
 539              		.loc 1 43 3 view .LVU109
 540 001a 4420     		movs	r0, #68
 541 001c FFF7FEFF 		bl	DS18B20_Write_Byte
 542              	.LVL49:
  45:Core/Src/DS18B20.c **** 
 543              		.loc 1 45 3 view .LVU110
 544 0020 4FF44870 		mov	r0, #800
 545 0024 FFF7FEFF 		bl	HAL_Delay
 546              	.LVL50:
  47:Core/Src/DS18B20.c **** 			return 0xffff; //error, device didn't respond
 547              		.loc 1 47 3 view .LVU111
  47:Core/Src/DS18B20.c **** 			return 0xffff; //error, device didn't respond
 548              		.loc 1 47 7 is_stmt 0 view .LVU112
 549 0028 FFF7FEFF 		bl	DS18B20_Initialize
 550              	.LVL51:
  47:Core/Src/DS18B20.c **** 			return 0xffff; //error, device didn't respond
 551              		.loc 1 47 6 view .LVU113
 552 002c 10B1     		cbz	r0, .L46
  48:Core/Src/DS18B20.c **** 		} else {
 553              		.loc 1 48 11 view .LVU114
 554 002e 9FED0E0A 		vldr.32	s0, .L47
 555 0032 EBE7     		b	.L40
 556              	.L46:
 557              	.LBB5:
  50:Core/Src/DS18B20.c **** 			DS18B20_Write_Byte(SKIP_ROM); //Single device connected
 558              		.loc 1 50 4 is_stmt 1 view .LVU115
ARM GAS  /tmp/ccTqHLFx.s 			page 15


 559 0034 0120     		movs	r0, #1
 560 0036 FFF7FEFF 		bl	HAL_Delay
 561              	.LVL52:
  51:Core/Src/DS18B20.c **** 			DS18B20_Write_Byte(READ_SCRATCHPAD); //Get temperature from the device
 562              		.loc 1 51 4 view .LVU116
 563 003a CC20     		movs	r0, #204
 564 003c FFF7FEFF 		bl	DS18B20_Write_Byte
 565              	.LVL53:
  52:Core/Src/DS18B20.c **** 			uint8_t tmp1 = DS18B20_Read_Byte();
 566              		.loc 1 52 4 view .LVU117
 567 0040 BE20     		movs	r0, #190
 568 0042 FFF7FEFF 		bl	DS18B20_Write_Byte
 569              	.LVL54:
  53:Core/Src/DS18B20.c **** 			uint8_t tmp2 = DS18B20_Read_Byte();
 570              		.loc 1 53 4 view .LVU118
  53:Core/Src/DS18B20.c **** 			uint8_t tmp2 = DS18B20_Read_Byte();
 571              		.loc 1 53 19 is_stmt 0 view .LVU119
 572 0046 FFF7FEFF 		bl	DS18B20_Read_Byte
 573              	.LVL55:
 574 004a 0446     		mov	r4, r0
 575              	.LVL56:
  54:Core/Src/DS18B20.c **** 			uint16_t temperature = tmp1 | (tmp2 << 8);
 576              		.loc 1 54 4 is_stmt 1 view .LVU120
  54:Core/Src/DS18B20.c **** 			uint16_t temperature = tmp1 | (tmp2 << 8);
 577              		.loc 1 54 19 is_stmt 0 view .LVU121
 578 004c FFF7FEFF 		bl	DS18B20_Read_Byte
 579              	.LVL57:
  55:Core/Src/DS18B20.c **** 			return (float) temperature / 16;	//return float
 580              		.loc 1 55 4 is_stmt 1 view .LVU122
  55:Core/Src/DS18B20.c **** 			return (float) temperature / 16;	//return float
 581              		.loc 1 55 32 is_stmt 0 view .LVU123
 582 0050 44EA0024 		orr	r4, r4, r0, lsl #8
 583              	.LVL58:
  55:Core/Src/DS18B20.c **** 			return (float) temperature / 16;	//return float
 584              		.loc 1 55 13 view .LVU124
 585 0054 A3B2     		uxth	r3, r4
 586 0056 00EE103A 		vmov	s0, r3	@ int
 587              	.LVL59:
  56:Core/Src/DS18B20.c **** 		}
 588              		.loc 1 56 4 is_stmt 1 view .LVU125
  56:Core/Src/DS18B20.c **** 		}
 589              		.loc 1 56 11 is_stmt 0 view .LVU126
 590 005a B8EE400A 		vcvt.f32.u32	s0, s0
 591              	.LVL60:
  56:Core/Src/DS18B20.c **** 		}
 592              		.loc 1 56 31 view .LVU127
 593 005e DFED037A 		vldr.32	s15, .L47+4
 594 0062 20EE270A 		vmul.f32	s0, s0, s15
 595 0066 D1E7     		b	.L40
 596              	.L48:
 597              		.align	2
 598              	.L47:
 599 0068 00FF7F47 		.word	1199570688
 600 006c 0000803D 		.word	1031798784
 601              	.LBE5:
 602              		.cfi_endproc
 603              	.LFE131:
ARM GAS  /tmp/ccTqHLFx.s 			page 16


 605              		.section	.text.DS18B20_Read_Temperature_NB,"ax",%progbits
 606              		.align	1
 607              		.global	DS18B20_Read_Temperature_NB
 608              		.syntax unified
 609              		.thumb
 610              		.thumb_func
 611              		.fpu fpv4-sp-d16
 613              	DS18B20_Read_Temperature_NB:
 614              	.LFB132:
  62:Core/Src/DS18B20.c **** 	uint8_t tmp1 ;
 615              		.loc 1 62 37 is_stmt 1 view -0
 616              		.cfi_startproc
 617              		@ args = 0, pretend = 0, frame = 0
 618              		@ frame_needed = 0, uses_anonymous_args = 0
 619 0000 10B5     		push	{r4, lr}
 620              	.LCFI12:
 621              		.cfi_def_cfa_offset 8
 622              		.cfi_offset 4, -8
 623              		.cfi_offset 14, -4
  63:Core/Src/DS18B20.c **** 	uint8_t tmp2 ;
 624              		.loc 1 63 2 view .LVU129
  64:Core/Src/DS18B20.c **** 	uint16_t temperature;
 625              		.loc 1 64 2 view .LVU130
  65:Core/Src/DS18B20.c **** 
 626              		.loc 1 65 2 view .LVU131
  68:Core/Src/DS18B20.c **** 	case 0:
 627              		.loc 1 68 2 view .LVU132
 628 0002 244B     		ldr	r3, .L61
 629 0004 1B68     		ldr	r3, [r3]
 630 0006 032B     		cmp	r3, #3
 631 0008 39D8     		bhi	.L50
 632 000a DFE803F0 		tbb	[pc, r3]
 633              	.L52:
 634 000e 02       		.byte	(.L55-.L52)/2
 635 000f 0C       		.byte	(.L54-.L52)/2
 636 0010 18       		.byte	(.L53-.L52)/2
 637 0011 21       		.byte	(.L51-.L52)/2
 638              		.p2align 1
 639              	.L55:
  70:Core/Src/DS18B20.c **** 			return 0xffff; //error, no response from Thermometer
 640              		.loc 1 70 3 view .LVU133
  70:Core/Src/DS18B20.c **** 			return 0xffff; //error, no response from Thermometer
 641              		.loc 1 70 7 is_stmt 0 view .LVU134
 642 0012 FFF7FEFF 		bl	DS18B20_Initialize
 643              	.LVL61:
  70:Core/Src/DS18B20.c **** 			return 0xffff; //error, no response from Thermometer
 644              		.loc 1 70 6 view .LVU135
 645 0016 0028     		cmp	r0, #0
 646 0018 35D1     		bne	.L58
  73:Core/Src/DS18B20.c **** 		}
 647              		.loc 1 73 4 is_stmt 1 view .LVU136
 648 001a 1F4B     		ldr	r3, .L61+4
 649 001c 1B68     		ldr	r3, [r3]
 650 001e 4FF61742 		movw	r2, #64535
 651 0022 5A62     		str	r2, [r3, #36]
  75:Core/Src/DS18B20.c **** 	case 1:
 652              		.loc 1 75 3 view .LVU137
ARM GAS  /tmp/ccTqHLFx.s 			page 17


 653 0024 0AE0     		b	.L49
 654              	.L54:
  77:Core/Src/DS18B20.c **** 		DS18B20_Write_Byte(CONVERT_T);	//Start temperature conversion
 655              		.loc 1 77 3 view .LVU138
 656 0026 CC20     		movs	r0, #204
 657 0028 FFF7FEFF 		bl	DS18B20_Write_Byte
 658              	.LVL62:
  78:Core/Src/DS18B20.c **** 		__HAL_TIM_SET_COUNTER(&htim7, 0xffff - 8000);
 659              		.loc 1 78 3 view .LVU139
 660 002c 4420     		movs	r0, #68
 661 002e FFF7FEFF 		bl	DS18B20_Write_Byte
 662              	.LVL63:
  79:Core/Src/DS18B20.c **** 		break;
 663              		.loc 1 79 3 view .LVU140
 664 0032 194B     		ldr	r3, .L61+4
 665 0034 1B68     		ldr	r3, [r3]
 666 0036 4EF2BF02 		movw	r2, #57535
 667 003a 5A62     		str	r2, [r3, #36]
  80:Core/Src/DS18B20.c **** 	case 2:
 668              		.loc 1 80 3 view .LVU141
 669              	.L49:
 100:Core/Src/DS18B20.c **** 
 670              		.loc 1 100 1 is_stmt 0 view .LVU142
 671 003c 10BD     		pop	{r4, pc}
 672              	.L53:
  82:Core/Src/DS18B20.c **** 			return 0xffff; //error, device didn't respond
 673              		.loc 1 82 3 is_stmt 1 view .LVU143
  82:Core/Src/DS18B20.c **** 			return 0xffff; //error, device didn't respond
 674              		.loc 1 82 7 is_stmt 0 view .LVU144
 675 003e FFF7FEFF 		bl	DS18B20_Initialize
 676              	.LVL64:
  82:Core/Src/DS18B20.c **** 			return 0xffff; //error, device didn't respond
 677              		.loc 1 82 6 view .LVU145
 678 0042 18BB     		cbnz	r0, .L59
  85:Core/Src/DS18B20.c **** 		}
 679              		.loc 1 85 4 is_stmt 1 view .LVU146
 680 0044 144B     		ldr	r3, .L61+4
 681 0046 1B68     		ldr	r3, [r3]
 682 0048 4FF61742 		movw	r2, #64535
 683 004c 5A62     		str	r2, [r3, #36]
  87:Core/Src/DS18B20.c **** 	case 3:
 684              		.loc 1 87 3 view .LVU147
 685 004e F5E7     		b	.L49
 686              	.L51:
  89:Core/Src/DS18B20.c **** 		DS18B20_Write_Byte(READ_SCRATCHPAD); //Get temperature from the device
 687              		.loc 1 89 3 view .LVU148
 688 0050 CC20     		movs	r0, #204
 689 0052 FFF7FEFF 		bl	DS18B20_Write_Byte
 690              	.LVL65:
  90:Core/Src/DS18B20.c **** 		tmp1 = DS18B20_Read_Byte();
 691              		.loc 1 90 3 view .LVU149
 692 0056 BE20     		movs	r0, #190
 693 0058 FFF7FEFF 		bl	DS18B20_Write_Byte
 694              	.LVL66:
  91:Core/Src/DS18B20.c **** 		tmp2 = DS18B20_Read_Byte();
 695              		.loc 1 91 3 view .LVU150
  91:Core/Src/DS18B20.c **** 		tmp2 = DS18B20_Read_Byte();
ARM GAS  /tmp/ccTqHLFx.s 			page 18


 696              		.loc 1 91 10 is_stmt 0 view .LVU151
 697 005c FFF7FEFF 		bl	DS18B20_Read_Byte
 698              	.LVL67:
 699 0060 0446     		mov	r4, r0
 700              	.LVL68:
  92:Core/Src/DS18B20.c **** 		temperature = tmp1 | (tmp2 << 8);
 701              		.loc 1 92 3 is_stmt 1 view .LVU152
  92:Core/Src/DS18B20.c **** 		temperature = tmp1 | (tmp2 << 8);
 702              		.loc 1 92 10 is_stmt 0 view .LVU153
 703 0062 FFF7FEFF 		bl	DS18B20_Read_Byte
 704              	.LVL69:
  93:Core/Src/DS18B20.c **** 		return (float) temperature / 16;	//return float
 705              		.loc 1 93 3 is_stmt 1 view .LVU154
  93:Core/Src/DS18B20.c **** 		return (float) temperature / 16;	//return float
 706              		.loc 1 93 22 is_stmt 0 view .LVU155
 707 0066 44EA0024 		orr	r4, r4, r0, lsl #8
 708              	.LVL70:
  93:Core/Src/DS18B20.c **** 		return (float) temperature / 16;	//return float
 709              		.loc 1 93 15 view .LVU156
 710 006a A3B2     		uxth	r3, r4
 711 006c 00EE103A 		vmov	s0, r3	@ int
 712              	.LVL71:
  94:Core/Src/DS18B20.c **** 	default:
 713              		.loc 1 94 3 is_stmt 1 view .LVU157
  94:Core/Src/DS18B20.c **** 	default:
 714              		.loc 1 94 10 is_stmt 0 view .LVU158
 715 0070 B8EE400A 		vcvt.f32.u32	s0, s0
 716              	.LVL72:
  94:Core/Src/DS18B20.c **** 	default:
 717              		.loc 1 94 30 view .LVU159
 718 0074 DFED097A 		vldr.32	s15, .L61+8
 719 0078 20EE270A 		vmul.f32	s0, s0, s15
 720 007c DEE7     		b	.L49
 721              	.LVL73:
 722              	.L50:
  96:Core/Src/DS18B20.c **** 		break;
 723              		.loc 1 96 3 is_stmt 1 view .LVU160
  96:Core/Src/DS18B20.c **** 		break;
 724              		.loc 1 96 16 is_stmt 0 view .LVU161
 725 007e 054B     		ldr	r3, .L61
 726 0080 0022     		movs	r2, #0
 727 0082 1A60     		str	r2, [r3]
  97:Core/Src/DS18B20.c **** 	}
 728              		.loc 1 97 3 is_stmt 1 view .LVU162
 100:Core/Src/DS18B20.c **** 
 729              		.loc 1 100 1 is_stmt 0 view .LVU163
 730 0084 DAE7     		b	.L49
 731              	.L58:
  71:Core/Src/DS18B20.c **** 		} else {
 732              		.loc 1 71 11 view .LVU164
 733 0086 9FED060A 		vldr.32	s0, .L61+12
 734 008a D7E7     		b	.L49
 735              	.L59:
  83:Core/Src/DS18B20.c **** 		} else {
 736              		.loc 1 83 11 view .LVU165
 737 008c 9FED040A 		vldr.32	s0, .L61+12
 738 0090 D4E7     		b	.L49
ARM GAS  /tmp/ccTqHLFx.s 			page 19


 739              	.L62:
 740 0092 00BF     		.align	2
 741              	.L61:
 742 0094 00000000 		.word	.LANCHOR0
 743 0098 00000000 		.word	htim7
 744 009c 0000803D 		.word	1031798784
 745 00a0 00FF7F47 		.word	1199570688
 746              		.cfi_endproc
 747              	.LFE132:
 749              		.global	DS18B20_state
 750              		.section	.bss.DS18B20_state,"aw",%nobits
 751              		.align	2
 752              		.set	.LANCHOR0,. + 0
 755              	DS18B20_state:
 756 0000 00000000 		.space	4
 757              		.text
 758              	.Letext0:
 759              		.file 2 "/usr/arm-none-eabi/include/machine/_default_types.h"
 760              		.file 3 "/usr/arm-none-eabi/include/sys/_stdint.h"
 761              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f446xx.h"
 762              		.file 5 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 763              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 764              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 765              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 766              		.file 9 "Core/Inc/tim.h"
 767              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
ARM GAS  /tmp/ccTqHLFx.s 			page 20


DEFINED SYMBOLS
                            *ABS*:0000000000000000 DS18B20.c
     /tmp/ccTqHLFx.s:18     .text.micro_delay:0000000000000000 $t
     /tmp/ccTqHLFx.s:25     .text.micro_delay:0000000000000000 micro_delay
     /tmp/ccTqHLFx.s:52     .text.micro_delay:0000000000000010 $d
     /tmp/ccTqHLFx.s:57     .text.Set_Pin_Output:0000000000000000 $t
     /tmp/ccTqHLFx.s:63     .text.Set_Pin_Output:0000000000000000 Set_Pin_Output
     /tmp/ccTqHLFx.s:110    .text.Set_Pin_Output_Defualt:0000000000000000 $t
     /tmp/ccTqHLFx.s:116    .text.Set_Pin_Output_Defualt:0000000000000000 Set_Pin_Output_Defualt
     /tmp/ccTqHLFx.s:137    .text.Set_Pin_Output_Defualt:000000000000000c $d
     /tmp/ccTqHLFx.s:142    .text.Set_Pin_Input:0000000000000000 $t
     /tmp/ccTqHLFx.s:148    .text.Set_Pin_Input:0000000000000000 Set_Pin_Input
     /tmp/ccTqHLFx.s:192    .text.Set_Pin_Input_Defualt:0000000000000000 $t
     /tmp/ccTqHLFx.s:198    .text.Set_Pin_Input_Defualt:0000000000000000 Set_Pin_Input_Defualt
     /tmp/ccTqHLFx.s:219    .text.Set_Pin_Input_Defualt:000000000000000c $d
     /tmp/ccTqHLFx.s:224    .text.DS18B20_Initialize:0000000000000000 $t
     /tmp/ccTqHLFx.s:231    .text.DS18B20_Initialize:0000000000000000 DS18B20_Initialize
     /tmp/ccTqHLFx.s:290    .text.DS18B20_Initialize:0000000000000040 $d
     /tmp/ccTqHLFx.s:295    .text.DS18B20_Write_Byte:0000000000000000 $t
     /tmp/ccTqHLFx.s:302    .text.DS18B20_Write_Byte:0000000000000000 DS18B20_Write_Byte
     /tmp/ccTqHLFx.s:388    .text.DS18B20_Write_Byte:0000000000000054 $d
     /tmp/ccTqHLFx.s:393    .text.DS18B20_Read_Byte:0000000000000000 $t
     /tmp/ccTqHLFx.s:400    .text.DS18B20_Read_Byte:0000000000000000 DS18B20_Read_Byte
     /tmp/ccTqHLFx.s:496    .text.DS18B20_Read_Byte:0000000000000054 $d
     /tmp/ccTqHLFx.s:501    .text.DS18B20_Read_Temperature:0000000000000000 $t
     /tmp/ccTqHLFx.s:508    .text.DS18B20_Read_Temperature:0000000000000000 DS18B20_Read_Temperature
     /tmp/ccTqHLFx.s:599    .text.DS18B20_Read_Temperature:0000000000000068 $d
     /tmp/ccTqHLFx.s:606    .text.DS18B20_Read_Temperature_NB:0000000000000000 $t
     /tmp/ccTqHLFx.s:613    .text.DS18B20_Read_Temperature_NB:0000000000000000 DS18B20_Read_Temperature_NB
     /tmp/ccTqHLFx.s:634    .text.DS18B20_Read_Temperature_NB:000000000000000e $d
     /tmp/ccTqHLFx.s:638    .text.DS18B20_Read_Temperature_NB:0000000000000012 $t
     /tmp/ccTqHLFx.s:742    .text.DS18B20_Read_Temperature_NB:0000000000000094 $d
     /tmp/ccTqHLFx.s:755    .bss.DS18B20_state:0000000000000000 DS18B20_state
     /tmp/ccTqHLFx.s:751    .bss.DS18B20_state:0000000000000000 $d

UNDEFINED SYMBOLS
htim6
HAL_GPIO_Init
HAL_GPIO_WritePin
HAL_GPIO_ReadPin
HAL_Delay
htim7
